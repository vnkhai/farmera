<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Giỏ hàng & Thanh toán - FarmEra</title>
    <link rel="icon" href="assets/img/favicons/favicon.ico" type="image/x-icon" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Plus+Jakarta+Sans:wght@500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              deepgreen: "#0F3D2E",
              olive: "#A3B18A",
              cream: "#F8F9F4",
              gold: "#E5C97B",
              graphite: "#1C1C1C",
            },
            fontFamily: {
              heading: ["Plus Jakarta Sans", "sans-serif"],
              body: ["Inter", "sans-serif"],
            },
          },
        },
      };
    </script>
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f8f9f4;
        color: #1c1c1c;
      }
      .glass-header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid #e5e5e5;
      }
      .input-field {
        width: 100%;
        padding: 12px 16px;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        background-color: white;
        transition: all 0.3s;
      }
      .input-field:focus {
        outline: none;
        border-color: #0f3d2e;
        box-shadow: 0 0 0 3px rgba(15, 61, 46, 0.1);
      }
      .step-active {
        color: #0f3d2e;
        font-weight: 700;
        border-bottom: 2px solid #e5c97b;
      }
      .step-inactive {
        color: #9ca3af;
      }
      /* Payment Method Tabs */
      .payment-tab.active {
        background-color: #0f3d2e;
        color: white;
        border-color: #0f3d2e;
      }
      .payment-tab.active i {
        color: #e5c97b;
      }
      .payment-tab:not(.active):hover {
        border-color: #0f3d2e;
        color: #0f3d2e;
      }
      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      .text-balance {
        text-wrap: balance;
      }
    </style>
  </head>
  <body class="antialiased">
    <!-- HEADER -->
    <header
      class="fixed w-full top-0 z-50 bg-white border-b-2 border-[#0F3D2E]/10 shadow-md"
    >
      <div
        class="container mx-auto px-6 h-20 flex justify-between items-center"
      >
        <!-- Logo & Brand -->
        <a href="index.html" class="flex items-center gap-3 group">
          <div
            class="w-12 h-12 bg-gradient-to-br from-[#0F3D2E] to-[#0A2618] rounded-lg flex items-center justify-center shadow-md group-hover:shadow-lg transition-shadow"
          >
            <img
              src="assets/img/logo-farmera.png"
              alt="FarmEra"
              class="w-7 h-7 filter brightness-0 invert"
            />
          </div>
          <div class="hidden sm:block">
            <div class="text-sm font-bold text-[#0F3D2E] tracking-tight">
              FarmEra
            </div>
            <div class="text-xs text-[#A3B18A] font-medium">Smart Farming</div>
          </div>
        </a>

        <!-- Navigation Menu -->
        <nav class="hidden lg:flex items-center space-x-1">
          <a
            href="index.html"
            class="px-4 py-2 text-[#555] font-medium text-sm rounded-lg hover:bg-[#F8F9F4] hover:text-[#0F3D2E] transition-all duration-200"
            >Trang chủ</a
          >
          <a
            href="san-pham.html"
            class="px-4 py-2 text-[#555] font-medium text-sm rounded-lg hover:bg-[#F8F9F4] hover:text-[#0F3D2E] transition-all duration-200"
            >Sản phẩm</a
          >
          <a
            href="dich-vu.html"
            class="px-4 py-2 text-[#555] font-medium text-sm rounded-lg hover:bg-[#F8F9F4] hover:text-[#0F3D2E] transition-all duration-200"
            >Dịch vụ</a
          >
          <a
            href="gioi-thieu.html"
            class="px-4 py-2 text-[#555] font-medium text-sm rounded-lg hover:bg-[#F8F9F4] hover:text-[#0F3D2E] transition-all duration-200"
            >Giới thiệu</a
          >
          <a
            href="chinh-sach.html"
            class="px-4 py-2 text-[#555] font-medium text-sm rounded-lg hover:bg-[#F8F9F4] hover:text-[#0F3D2E] transition-all duration-200"
            >Chính sách</a
          >
          <a
            href="lien-he.html"
            class="px-4 py-2 text-[#555] font-medium text-sm rounded-lg hover:bg-[#F8F9F4] hover:text-[#0F3D2E] transition-all duration-200"
            >Liên hệ</a
          >
        </nav>

        <!-- Right Actions -->
        <div class="flex items-center space-x-4">
          <!-- Search -->
          <form
            action="san-pham.html"
            method="get"
            class="hidden md:flex items-center bg-[#F8F9F4] rounded-full px-4 py-2 border border-[#E5C97B]/30 hover:border-[#E5C97B] transition-colors"
          >
            <input
              name="q"
              type="search"
              placeholder="Tìm sản phẩm..."
              class="bg-transparent text-sm text-[#1C1C1C] placeholder-[#999] focus:outline-none w-40"
            />
            <button
              type="submit"
              class="text-[#A3B18A] hover:text-[#0F3D2E] transition-colors ml-2"
            >
              <i class="fas fa-search text-sm"></i>
            </button>
          </form>

          <!-- Cart Icon -->
          <a href="gio-hang.htm" class="relative p-2.5 rounded-lg bg-[#F8F9F4] hover:bg-[#E5C97B] text-[#0F3D2E] transition-all duration-200 group">
            <i class="fas fa-shopping-cart text-lg"></i>
            <span id="cart-badge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center opacity-0 scale-0 group-hover:opacity-100 group-hover:scale-100 transition-all duration-200 hidden">0</span>
          </a>

          <!-- Mobile Menu Button -->
          <button id="mobile-menu-button" class="lg:hidden p-2 rounded-lg hover:bg-[#F8F9F4] text-[#0F3D2E]">
            <i class="fas fa-bars text-lg"></i>
          </button>
        </div>
      </div>
    </header>

    <!-- MOBILE MENU (New) -->
    <div id="mobile-menu" class="hidden lg:hidden fixed inset-0 bg-black/50 z-[99]">
        <div class="w-4/5 max-w-sm h-full bg-white shadow-2xl flex flex-col py-6">
            <div class="px-6 pb-4 border-b border-gray-200">
                <a href="index.html" class="flex items-center gap-3">
                    <img src="assets/img/logo-farmera.png" alt="FarmEra" class="w-9 h-9" />
                    <span class="font-bold text-deepgreen text-lg">FarmEra</span>
                </a>
            </div>
            <nav class="flex-1 px-6 py-4 space-y-2 text-lg">
                <a href="index.html" class="block py-2 text-gray-700 hover:text-gold">Trang chủ</a>
                <a href="san-pham.html" class="block py-2 text-gray-700 hover:text-gold">Sản phẩm</a>
                <a href="dich-vu.html" class="block py-2 text-gray-700 hover:text-gold">Dịch vụ</a>
                <a href="gioi-thieu.html" class="block py-2 text-gray-700 hover:text-gold">Giới thiệu</a>
                <a href="chinh-sach.html" class="block py-2 text-gray-700 hover:text-gold">Chính sách</a>
                <a href="lien-he.html" class="block py-2 text-gray-700 hover:text-gold">Liên hệ</a>
            </nav>
            <div class="px-6 text-sm text-gray-400">
                &copy; 2025 FarmEra. All rights reserved.
            </div>
        </div>
        <div id="mobile-menu-overlay" class="flex-1 h-full"></div>
    </div>

    <!-- Step Progress Bar -->
    <div class="mt-20 py-6 bg-white border-b border-gray-200">
      <div class="container mx-auto px-6 flex justify-center space-x-8 md:space-x-16 text-sm md:text-base"
        >
          <div id="step-cart" class="step-active pb-2 cursor-pointer">
            1. Giỏ hàng
          </div>
          <div id="step-checkout" class="step-inactive pb-2">2. Thanh toán</div>
          <div id="step-success" class="step-inactive pb-2">3. Hoàn tất</div>
        </div>
      </div>
    </div>

    <!-- MAIN CONTAINER -->
    <main class="container mx-auto px-6 py-10 min-h-screen">
      <!-- =======================
             PHẦN 1: GIỎ HÀNG (Giữ nguyên)
        ======================== -->
      <section id="cart-section" class="block animate-fade-in">
        <div class="mb-8">
          <h1 class="text-3xl font-bold text-deepgreen font-heading">
            Giỏ hàng của bạn
          </h1>
          <p class="text-gray-500 text-balance">
            Kiểm tra sản phẩm và dịch vụ trước khi thanh toán.
          </p>
        </div>

        <div class="flex flex-col lg:flex-row gap-10">
          <!-- Cart Items -->
          <div class="w-full lg:w-8/12 space-y-6" id="cart-items-container">
            <p id="empty-cart-msg" class="text-center text-gray-500 py-8">
              Giỏ hàng của bạn đang trống.
              <a
                href="san-pham.html"
                class="text-deepgreen font-bold hover:underline"
                >Tiếp tục mua sắm</a
              >
            </p>
          </div>

          <!-- Summary (Right) -->
          <div class="w-full lg:w-4/12">
            <div
              class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-deepgreen sticky top-32"
            >
              <h3 class="text-xl font-bold text-deepgreen mb-6">
                Tóm tắt đơn hàng
              </h3>
              <div
                id="order-items-summary"
                class="space-y-2 mb-4 max-h-48 overflow-y-auto"
              >
                <p class="text-sm text-gray-500">Đang tải...</p>
              </div>
              <div class="space-y-4 border-b border-gray-100 pb-6 mb-6 text-sm">
                <div class="flex justify-between text-gray-600">
                  <span>Tạm tính</span
                  ><span class="font-medium" id="subtotal">0đ</span>
                </div>
                <div class="flex justify-between text-gray-600">
                  <span>Giảm giá</span
                  ><span class="font-medium text-green-600" id="discount"
                    >0đ</span
                  >
                </div>
                <div class="flex justify-between text-gray-600">
                  <span>Vận chuyển</span
                  ><span class="font-medium">Miễn phí</span>
                </div>
              </div>
              <div class="flex justify-between items-end mb-8">
                <span class="text-gray-800 font-bold">Tổng thanh toán</span>
                <span class="text-2xl font-bold text-deepgreen" id="total-price"
                  >0đ</span
                >
              </div>
              <button
                onclick="goToCheckout()"
                class="w-full bg-deepgreen text-white font-bold py-4 rounded-lg hover:bg-gold hover:text-deepgreen transition duration-300 shadow-md mb-4"
              >
                Tiến hành thanh toán
              </button>
              <a
                href="san-pham.html"
                class="block text-center text-sm font-medium text-gray-500 hover:text-deepgreen"
                ><i class="fas fa-arrow-left mr-2"></i>Tiếp tục mua sắm</a
              >
            </div>
          </div>
        </div>
      </section>

      <!-- =======================
             PHẦN 2: THANH TOÁN (CẬP NHẬT GIAO DIỆN MỚI)
        ======================== -->
      <section id="checkout-section" class="hidden animate-fade-in">
        <div class="mb-8">
          <button
            onclick="backToCart()"
            class="text-gray-400 hover:text-deepgreen mb-2 text-sm"
          >
            <i class="fas fa-arrow-left mr-1"></i> Quay lại giỏ hàng
          </button>
          <h1 class="text-3xl font-bold text-deepgreen font-heading">
            Thanh toán & Giao nhận
          </h1>
        </div>

        <div class="flex flex-col lg:flex-row gap-10">
          <!-- Left: Info Form -->
          <div class="w-full lg:w-7/12 space-y-8">
            <!-- 1. Thông tin người nhận (Chung) -->
            <div class="bg-white p-6 rounded-xl border border-gray-200">
              <h3
                class="text-lg font-bold text-deepgreen mb-4 flex items-center"
              >
                <span
                  class="w-8 h-8 rounded-full bg-deepgreen text-white flex items-center justify-center text-sm mr-3"
                  >1</span
                >
                Thông tin người đặt
              </h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="text-sm text-gray-600 mb-1 block"
                    >Họ và tên *</label
                  ><input
                    type="text"
                    class="input-field"
                    placeholder="Nhập họ tên"
                  />
                </div>
                <div>
                  <label class="text-sm text-gray-600 mb-1 block"
                    >Số điện thoại *</label
                  ><input
                    type="tel"
                    class="input-field"
                    placeholder="09xxxxxxx"
                  />
                </div>
                <div class="md:col-span-2">
                  <label class="text-sm text-gray-600 mb-1 block">Email</label
                  ><input
                    type="email"
                    class="input-field"
                    placeholder="email@example.com"
                  />
                </div>
              </div>
            </div>

            <!-- 2. Phương thức Thanh toán & Form Tương ứng -->
            <div class="bg-white p-6 rounded-xl border border-gray-200">
              <h3
                class="text-lg font-bold text-deepgreen mb-6 flex items-center"
              >
                <span
                  class="w-8 h-8 rounded-full bg-deepgreen text-white flex items-center justify-center text-sm mr-3"
                  >2</span
                >
                Hình thức thanh toán
              </h3>

              <!-- Tabs Switcher -->
              <div class="grid grid-cols-2 gap-4 mb-8">
                <div
                  id="tab-offline"
                  onclick="switchPayment('offline')"
                  class="payment-tab active cursor-pointer border border-gray-200 rounded-xl p-4 text-center transition-all duration-300"
                >
                  <i class="fas fa-truck text-2xl mb-2 text-gold"></i>
                  <h4 class="font-bold">Thanh toán khi nhận (Offline)</h4>
                  <p class="text-xs opacity-80 mt-1">COD / Tiền mặt</p>
                </div>
                <div
                  id="tab-online"
                  onclick="switchPayment('online')"
                  class="payment-tab cursor-pointer border border-gray-200 rounded-xl p-4 text-center transition-all duration-300 text-gray-500"
                >
                  <i class="fas fa-globe text-2xl mb-2 text-gray-400"></i>
                  <h4 class="font-bold">Thanh toán Online</h4>
                  <p class="text-xs opacity-80 mt-1">Thẻ / QR Code</p>
                </div>
              </div>

              <!-- CONTENT: OFFLINE (Form Địa chỉ) -->
              <div id="content-offline" class="block animate-fade-in">
                <div
                  class="bg-cream p-5 rounded-lg border border-dashed border-deepgreen/30"
                >
                  <h4 class="font-bold text-deepgreen mb-4">
                    <i class="fas fa-map-marker-alt mr-2"></i>Địa chỉ giao hàng
                    & Thu tiền
                  </h4>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <label class="text-sm text-gray-600 mb-1 block"
                        >Tỉnh / Thành</label
                      >
                      <input
                        type="text"
                        class="input-field"
                        placeholder="VD: Cần Thơ"
                      />
                    </div>
                    <div>
                      <label class="text-sm text-gray-600 mb-1 block"
                        >Phường / Xã</label
                      >
                      <input
                        type="text"
                        class="input-field"
                        placeholder="VD: Phường Xuân Khánh"
                      />
                    </div>
                    <div class="md:col-span-2">
                      <label class="text-sm text-gray-600 mb-1 block"
                        >Địa chỉ chi tiết (Số nhà, ấp)</label
                      >
                      <input
                        type="text"
                        class="input-field"
                        placeholder="VD: 123 Đường A, Ấp B..."
                      />
                    </div>
                  </div>
                  <div class="mt-4 flex items-center text-sm text-gray-500">
                    <i class="fas fa-info-circle mr-2 text-gold"></i>
                    <span class="text-balance"
                      >Nhân viên sẽ liên hệ và thu tiền mặt trực tiếp tại địa
                      chỉ này.</span
                    >
                  </div>
                </div>
              </div>

              <!-- CONTENT: ONLINE (Form Thẻ/QR + Địa chỉ rút gọn) -->
              <div id="content-online" class="hidden animate-fade-in">
                <!-- Online Payment Info -->
                <div
                  class="bg-blue-50 p-4 rounded-lg border border-blue-200 mb-6"
                >
                  <p class="text-sm text-blue-800 text-balance">
                    <i class="fas fa-info-circle mr-2"></i>Chúng tôi sẽ gửi OTP
                    thanh toán qua email/SMS
                  </p>
                </div>

                <!-- Card Input Form -->
                <div class="grid grid-cols-1 gap-4 mb-6">
                  <div>
                    <label class="text-sm text-gray-600 mb-1 block"
                      >Số thẻ</label
                    ><input
                      type="text"
                      class="input-field font-mono"
                      placeholder="0000 0000 0000 0000"
                    />
                  </div>
                  <div class="grid grid-cols-2 gap-4">
                    <div>
                      <label class="text-sm text-gray-600 mb-1 block"
                        >Ngày hết hạn</label
                      ><input
                        type="text"
                        class="input-field"
                        placeholder="MM/YY"
                      />
                    </div>
                    <div>
                      <label class="text-sm text-gray-600 mb-1 block"
                        >CVC/CVV</label
                      ><input
                        type="password"
                        class="input-field"
                        placeholder="123"
                      />
                    </div>
                  </div>
                  <div>
                    <label class="text-sm text-gray-600 mb-1 block"
                      >Tên chủ thẻ</label
                    ><input
                      type="text"
                      class="input-field uppercase"
                      placeholder="NGUYEN VAN A"
                    />
                  </div>
                </div>

                <!-- Shipping Address (Same as Offline) -->
                <div
                  class="bg-cream p-5 rounded-lg border border-dashed border-deepgreen/30 mt-6"
                >
                  <h5 class="font-bold text-deepgreen mb-4">
                    <i class="fas fa-map-marker-alt mr-2"></i>Địa chỉ giao hàng
                    & Ghi chú
                  </h5>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <label class="text-sm text-gray-600 mb-1 block"
                        >Tỉnh / Thành</label
                      >
                      <input
                        type="text"
                        class="input-field"
                        placeholder="VD: Cần Thơ"
                      />
                    </div>
                    <div>
                      <label class="text-sm text-gray-600 mb-1 block"
                        >Phường / Xã</label
                      >
                      <input
                        type="text"
                        class="input-field"
                        placeholder="VD: Phường Xuân Khánh"
                      />
                    </div>
                    <div class="md:col-span-2">
                      <label class="text-sm text-gray-600 mb-1 block"
                        >Địa chỉ chi tiết (Số nhà, ấp)</label
                      >
                      <input
                        type="text"
                        class="input-field"
                        placeholder="VD: 123 Đường A, Ấp B..."
                      />
                    </div>
                  </div>
                  <div class="mt-4 flex items-center text-sm text-gray-500">
                    <i class="fas fa-info-circle mr-2 text-gold"></i>
                    <span class="text-balance">Hàng sẽ được gửi đến địa chỉ này.</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Right: Summary (Giữ nguyên) -->
          <div class="w-full lg:w-5/12">
            <div
              class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 sticky top-24"
            >
              <h3 class="text-lg font-bold text-deepgreen mb-4">
                Đơn hàng <span id="checkout-item-count">(0)</span>
              </h3>
              <div
                class="space-y-4 max-h-60 overflow-y-auto pr-2 mb-4 scrollbar-thin"
                id="checkout-items-list"
              >
                <p class="text-sm text-gray-500 text-center">Giỏ hàng trống</p>
              </div>
              <div class="flex gap-2 mb-6">
                <input
                  type="text"
                  placeholder="Mã giảm giá"
                  class="flex-1 border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:border-deepgreen"
                />
                <button
                  class="bg-gray-200 text-gray-600 px-4 py-2 rounded text-sm font-bold hover:bg-gold hover:text-white transition"
                >
                  Áp dụng
                </button>
              </div>
              <div
                class="border-t border-b border-gray-100 py-4 mb-6 space-y-2 text-sm"
              >
                <div class="flex justify-between text-gray-600">
                  <span>Tạm tính</span><span id="checkout-subtotal">0đ</span>
                </div>
                <div class="flex justify-between text-gray-600">
                  <span>Vận chuyển</span><span>Miễn phí</span>
                </div>
              </div>
              <div class="flex justify-between items-center mb-8">
                <span class="text-lg font-bold text-deepgreen">Tổng cộng</span>
                <span class="text-3xl font-bold text-gold" id="checkout-total"
                  >0đ</span
                >
              </div>
              <button
                onclick="submitOrder()"
                class="w-full bg-deepgreen text-white font-bold py-4 rounded-lg hover:bg-black transition duration-300 shadow-xl flex justify-center items-center"
              >
                <span>Hoàn tất thanh toán</span
                ><i class="fas fa-arrow-right ml-2"></i>
              </button>
              <p class="text-xs text-center text-gray-400 mt-4 text-balance">
                Bằng việc thanh toán, bạn đồng ý với
                <a href="#" class="underline hover:text-deepgreen"
                  >Điều khoản dịch vụ</a
                >
                của FarmEra.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- =======================
             PHẦN 3: SUCCESS PAGE (Giữ nguyên)
        ======================== -->
      <section
        id="success-section"
        class="hidden animate-fade-in text-center py-10"
      >
        <div
          class="max-w-2xl mx-auto bg-white p-10 rounded-2xl shadow-lg border-t-8 border-deepgreen"
        >
          <div
            class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6"
          >
            <i class="fas fa-check text-4xl text-green-600"></i>
          </div>
          <h1 class="text-3xl font-bold text-deepgreen mb-2 font-heading">
            Đặt hàng thành công!
          </h1>
          <p class="text-gray-500 mb-8 text-balance">
            Cảm ơn bạn đã tin tưởng FarmEra. Chúng tôi sẽ liên hệ để xác nhận
            lịch dịch vụ trong vòng 30 phút.
          </p>
          <div
            class="bg-cream p-6 rounded-lg mb-8 text-left border border-dashed border-gray-300"
          >
            <div class="flex justify-between mb-2">
              <span class="text-gray-500">Mã đơn hàng:</span
              ><span class="font-bold text-deepgreen">#FE-882910</span>
            </div>
            <div class="flex justify-between mb-2">
              <span class="text-gray-500">Thời gian:</span
              ><span class="font-medium text-gray-800">26/11/2025 - 14:30</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-500">Phương thức:</span
              ><span id="success-method" class="font-medium text-gray-800"
                >COD (Thanh toán khi nhận)</span
              >
            </div>
          </div>
          <div class="flex flex-col md:flex-row justify-center gap-4">
            <a
              href="#"
              class="px-8 py-3 bg-white border border-gray-300 text-gray-700 font-bold rounded-lg hover:border-deepgreen hover:text-deepgreen transition"
              >Xem chi tiết đơn hàng</a
            >
            <a
              href="san-pham.html"
              class="px-8 py-3 bg-deepgreen text-white font-bold rounded-lg hover:bg-gold hover:text-deepgreen transition shadow-md"
              >Tiếp tục mua sắm</a
            >
          </div>
          <div class="mt-8 text-sm text-gray-400">
            Cần hỗ trợ ngay? Gọi hotline
            <strong class="text-deepgreen">0903 123 456</strong>
          </div>
        </div>
      </section>
    </main>

    <!-- FOOTER -->
    <footer class="bg-[#0F3D2E] text-white pt-20 pb-8">
      <div class="container mx-auto px-6">
        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-12 mb-12"
        >
          <!-- Brand Column -->
          <div class="lg:col-span-1">
            <a
              href="index.html"
              class="text-2xl font-bold text-[#E5C97B] font-heading tracking-tighter mb-4 flex items-center gap-2"
            >
              <img
                src="assets/img/logo-farmera.png"
                alt="FarmEra"
                class="w-8 h-8 filter brightness-0 invert"
              />
              <span>Farm<span class="text-white">Era</span></span>
            </a>
            <p class="text-gray-300 text-sm mb-6 leading-relaxed text-balance">
              Nền tảng kết nối công nghệ nông nghiệp với nông dân Việt Nam.
            </p>
            <div class="flex space-x-3">
              <a
                href="#"
                class="w-10 h-10 rounded-full bg-white/10 hover:bg-[#E5C97B] hover:text-[#0F3D2E] transition flex items-center justify-center text-sm"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a
                href="#"
                class="w-10 h-10 rounded-full bg-white/10 hover:bg-[#E5C97B] hover:text-[#0F3D2E] transition flex items-center justify-center text-sm"
                ><i class="fab fa-instagram"></i
              ></a>
              <a
                href="#"
                class="w-10 h-10 rounded-full bg-white/10 hover:bg-[#E5C97B] hover:text-[#0F3D2E] transition flex items-center justify-center text-sm"
                ><i class="fab fa-tiktok"></i
              ></a>
              <a
                href="https://id.zalo.me/account?continue=http%3A%2F%2Fzalo.me%2F0792101733"
                target="_blank"
                class="w-10 h-10 rounded-full bg-white/10 hover:bg-[#E5C97B] hover:text-[#0F3D2E] transition flex items-center justify-center text-sm"
                ><i class="fas fa-comment-dots"></i
              ></a>
            </div>
          </div>
          <!-- Menu -->
          <div>
            <h4
              class="text-lg font-bold mb-6 text-[#E5C97B] uppercase text-xs tracking-wider"
            >
              Menu
            </h4>
            <ul class="space-y-3 text-gray-300 text-sm">
              <li>
                <a href="index.html" class="hover:text-[#E5C97B] transition"
                  >Trang chủ</a
                >
              </li>
              <li>
                <a href="san-pham.html" class="hover:text-[#E5C97B] transition"
                  >Sản phẩm</a
                >
              </li>
              <li>
                <a href="dich-vu.html" class="hover:text-[#E5C97B] transition"
                  >Dịch vụ</a
                >
              </li>
              <li>
                <a
                  href="gioi-thieu.html"
                  class="hover:text-[#E5C97B] transition"
                  >Giới thiệu</a
                >
              </li>
            </ul>
          </div>
          <!-- Policies -->
          <div>
            <h4
              class="text-lg font-bold mb-6 text-[#E5C97B] uppercase text-xs tracking-wider"
            >
              Chính sách
            </h4>
            <ul class="space-y-3 text-gray-300 text-sm">
              <li>
                <a
                  href="chinh-sach.html"
                  class="hover:text-[#E5C97B] transition"
                  >Điều khoản sử dụng</a
                >
              </li>
              <li>
                <a
                  href="chinh-sach.html"
                  class="hover:text-[#E5C97B] transition"
                  >Bảo mật dữ liệu</a
                >
              </li>
              <li>
                <a
                  href="chinh-sach.html"
                  class="hover:text-[#E5C97B] transition"
                  >Đổi trả & hoàn tiền</a
                >
              </li>
              <li>
                <a href="lien-he.html" class="hover:text-[#E5C97B] transition"
                  >Liên hệ hỗ trợ</a
                >
              </li>
            </ul>
          </div>
          <!-- Contact -->
          <div>
            <h4
              class="text-lg font-bold mb-6 text-[#E5C97B] uppercase text-xs tracking-wider"
            >
              Liên hệ
            </h4>
            <ul class="space-y-3 text-gray-300 text-sm">
              <li class="flex items-start">
                <i
                  class="fas fa-map-marker-alt mr-3 text-[#E5C97B] mt-1 shrink-0"
                ></i>
                <span>Số 2, Đường 3/2, Ninh Kiều, Cần Thơ</span>
              </li>
              <li class="flex items-center">
                <i class="fas fa-phone mr-3 text-[#E5C97B]"></i>
                <a href="tel:0792101733" class="hover:text-[#E5C97B]"
                  >0792 101 733</a
                >
              </li>
              <li class="flex items-center">
                <i class="fas fa-envelope mr-3 text-[#E5C97B]"></i>
                <a href="mailto:support@farmera.vn" class="hover:text-[#E5C97B]"
                  >support@farmera.vn</a
                >
              </li>
            </ul>
          </div>
          <!-- Newsletter -->
          <div>
            <h4
              class="text-lg font-bold mb-6 text-[#E5C97B] uppercase text-xs tracking-wider"
            >
              Nhận tin
            </h4>
            <p class="text-gray-300 text-sm mb-4 text-balance">
              Đăng ký để nhận cập nhật mùa vụ & khuyến mãi.
            </p>
            <form class="flex flex-col gap-2">
              <input
                type="email"
                placeholder="Email của bạn"
                class="px-4 py-2 rounded bg-white/10 border border-white/20 text-white text-sm placeholder-gray-400 focus:outline-none focus:border-[#E5C97B] transition"
              />
              <button
                type="submit"
                class="px-4 py-2 bg-[#E5C97B] text-[#0F3D2E] rounded font-bold hover:bg-white transition text-sm"
              >
                Đăng ký
              </button>
            </form>
          </div>
        </div>
        <!-- Bottom Bar -->
        <div
          class="border-t border-white/10 pt-8 text-center text-gray-400 text-sm"
        >
          <p>
            &copy; 2025 FarmEra. All rights reserved. |
            <a href="#" class="hover:text-[#E5C97B]"
              >Group 9 <i class="fas fa-heart text-red-500"></i
            ></a>
          </p>
        </div>
      </div>
    </footer>

    <!-- LOGIC JS -->
    <script>
      // Render cart items from localStorage
      document.addEventListener("DOMContentLoaded", function () {
        const cartItemsContainer = document.getElementById(
          "cart-items-container"
        );
        const emptyCartMsg = document.getElementById("empty-cart-msg");
        const cart = JSON.parse(localStorage.getItem("farmera_cart")) || [];

        if (cart.length === 0) {
          cartItemsContainer.innerHTML =
            '<p id="empty-cart-msg" class="text-center text-gray-500 py-8">Giỏ hàng của bạn đang trống. <a href="san-pham.html" class="text-deepgreen font-bold hover:underline">Tiếp tục mua sắm</a></p>';
          return;
        }

        cartItemsContainer.innerHTML = "";
        cart.forEach((item, index) => {
          const cartItemHTML = `
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex flex-col md:flex-row gap-6 items-center md:items-start relative group">
              <button onclick="removeCartItem(${index})" class="absolute top-4 right-4 text-gray-300 hover:text-red-500 transition">
                <i class="far fa-trash-alt"></i>
              </button>
              <div class="w-24 h-24 shrink-0 bg-gray-100 rounded-lg overflow-hidden border border-gray-200">
                <img src="${
                  item.img || "assets/img/product-1.svg"
                }" class="w-full h-full object-cover" />
              </div>
              <div class="flex-1 w-full">
                <div class="flex justify-between items-start mb-2">
                  <div>
                    <span class="text-xs font-bold text-olive uppercase tracking-wider">${
                      item.type || "Sản phẩm"
                    }</span>
                    <h3 class="text-lg font-bold text-deepgreen">${
                      item.name
                    }</h3>
                  </div>
                </div>
                <div class="flex items-center text-gold font-bold text-lg mb-4">
                  ${item.price}
                </div>
                <div class="flex items-center gap-2">
                  <input type="number" value="${
                    item.quantity || 1
                  }" min="1" onchange="updateCartQuantity(${index}, this.value)" class="w-16 border border-gray-300 rounded px-2 py-1 text-center font-bold text-deepgreen focus:outline-none focus:border-deepgreen" />
                  <span class="text-sm text-green-600"><i class="fas fa-check mr-1"></i>Sẵn sàng</span>
                </div>
              </div>
            </div>
          `;
          cartItemsContainer.innerHTML += cartItemHTML;
        });
        updateCartSummary();
      });

      function removeCartItem(index) {
        const cart = JSON.parse(localStorage.getItem("farmera_cart")) || [];
        cart.splice(index, 1);
        localStorage.setItem("farmera_cart", JSON.stringify(cart));
        location.reload();
      }

      function updateCartQuantity(index, quantity) {
        const cart = JSON.parse(localStorage.getItem("farmera_cart")) || [];
        if (quantity <= 0) {
          removeCartItem(index);
        } else {
          cart[index].quantity = parseInt(quantity);
          localStorage.setItem("farmera_cart", JSON.stringify(cart));
          updateCartSummary();
        }
      }

      function updateCartSummary() {
        const cart = JSON.parse(localStorage.getItem("farmera_cart")) || [];
        const summaryContainer = document.getElementById("order-items-summary");

        if (cart.length === 0) {
          summaryContainer.innerHTML =
            '<p class="text-sm text-gray-500">Giỏ hàng trống</p>';
          document.getElementById("subtotal").textContent = "0đ";
          document.getElementById("discount").textContent = "0đ";
          document.getElementById("total-price").textContent = "0đ";
          return;
        }

        let summaryHTML = "";
        let total = 0;

        cart.forEach((item) => {
          const price =
            parseInt(item.price.toString().replace(/[^\d]/g, "")) || 0;
          const quantity = item.quantity || 1;
          const itemTotal = price * quantity;
          total += itemTotal;
          summaryHTML += `
            <div class="flex justify-between text-sm border-b border-gray-100 pb-2">
              <span class="text-gray-700">${
                item.name
              } <span class="text-gray-400">x${quantity}</span></span>
              <span class="font-semibold text-deepgreen">${itemTotal.toLocaleString(
                "vi-VN"
              )}đ</span>
            </div>
          `;
        });

        summaryContainer.innerHTML = summaryHTML;
        document.getElementById("subtotal").textContent =
          total.toLocaleString("vi-VN") + "đ";
        document.getElementById("discount").textContent = "0đ";
        document.getElementById("total-price").textContent =
          total.toLocaleString("vi-VN") + "đ";

        // Update checkout section summary
        updateCheckoutSummary();
      }

      function updateCheckoutSummary() {
        const cart = JSON.parse(localStorage.getItem("farmera_cart")) || [];
        const checkoutList = document.getElementById("checkout-items-list");
        const itemCount = document.getElementById("checkout-item-count");

        if (!checkoutList) return;

        itemCount.textContent = "(" + cart.length + ")";

        if (cart.length === 0) {
          checkoutList.innerHTML =
            '<p class="text-sm text-gray-500 text-center">Giỏ hàng trống</p>';
          document.getElementById("checkout-subtotal").textContent = "0đ";
          document.getElementById("checkout-total").textContent = "0đ";
          return;
        }

        let listHTML = "";
        let total = 0;

        cart.forEach((item) => {
          const quantity = item.quantity || 1;
          const price =
            parseInt(item.price.toString().replace(/[^\d]/g, "")) || 0;
          const itemTotal = price * quantity;
          total += itemTotal;

          listHTML += `
            <div class="flex justify-between items-center text-sm">
              <div class="flex items-center">
                <span class="bg-gray-200 text-xs px-2 rounded-full mr-2">x${quantity}</span>
                <span class="font-medium text-gray-700">${item.name}</span>
              </div>
              <span class="font-bold text-gray-800">${itemTotal.toLocaleString(
                "vi-VN"
              )}đ</span>
            </div>
          `;
        });

        checkoutList.innerHTML = listHTML;

        // Update checkout summary totals
        document.getElementById("checkout-subtotal").textContent =
          total.toLocaleString("vi-VN") + "đ";
        document.getElementById("checkout-total").textContent =
          total.toLocaleString("vi-VN") + "đ";
      }

      const cartSection = document.getElementById("cart-section");
      const checkoutSection = document.getElementById("checkout-section");
      const successSection = document.getElementById("success-section");

      const stepCart = document.getElementById("step-cart");
      const stepCheckout = document.getElementById("step-checkout");
      const stepSuccess = document.getElementById("step-success");

      function scrollToTop() {
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      // Switch Logic for Payment Tabs
      function switchPayment(method) {
        const tabOffline = document.getElementById("tab-offline");
        const tabOnline = document.getElementById("tab-online");
        const contentOffline = document.getElementById("content-offline");
        const contentOnline = document.getElementById("content-online");

        if (method === "offline") {
          tabOffline.classList.add("active");
          tabOffline.classList.remove("text-gray-500");
          tabOffline.querySelector("i").classList.remove("text-gray-400");

          tabOnline.classList.remove("active");
          tabOnline.classList.add("text-gray-500");
          tabOnline.querySelector("i").classList.add("text-gray-400");

          contentOffline.classList.remove("hidden");
          contentOnline.classList.add("hidden");
        } else {
          tabOnline.classList.add("active");
          tabOnline.classList.remove("text-gray-500");
          tabOnline.querySelector("i").classList.remove("text-gray-400");

          tabOffline.classList.remove("active");
          tabOffline.classList.add("text-gray-500");
          tabOffline.querySelector("i").classList.add("text-gray-400");

          contentOnline.classList.remove("hidden");
          contentOffline.classList.add("hidden");
        }
      }

      function goToCheckout() {
        cartSection.classList.add("hidden");
        checkoutSection.classList.remove("hidden");
        stepCart.classList.remove("step-active");
        stepCart.classList.add("step-inactive");
        stepCheckout.classList.remove("step-inactive");
        stepCheckout.classList.add("step-active");
        scrollToTop();
      }

      function backToCart() {
        checkoutSection.classList.add("hidden");
        cartSection.classList.remove("hidden");
        stepCheckout.classList.remove("step-active");
        stepCheckout.classList.add("step-inactive");
        stepCart.classList.remove("step-inactive");
        stepCart.classList.add("step-active");
        scrollToTop();
      }

      function submitOrder() {
        // Collect form data
        const nameInput = document.querySelector(
          'input[placeholder="Nhập họ tên"]'
        );
        const phoneInput = document.querySelector(
          'input[placeholder="09xxxxxxx"]'
        );
        const nameValue = nameInput ? nameInput.value.trim() : "";
        const phoneValue = phoneInput ? phoneInput.value.trim() : "";

        // Validate required fields
        if (!nameValue || !phoneValue) {
          alert("Vui lòng điền đầy đủ thông tin: Họ tên và Số điện thoại");
          return;
        }

        if (phoneValue.length < 9 || !/^\d+$/.test(phoneValue)) {
          alert("Số điện thoại không hợp lệ");
          return;
        }

        checkoutSection.classList.add("hidden");
        successSection.classList.remove("hidden");
        stepCheckout.classList.remove("step-active");
        stepCheckout.classList.add("step-inactive");
        stepSuccess.classList.remove("step-inactive");
        stepSuccess.classList.add("step-active");
        document.getElementById("cart-count").innerText = "0";
        document.getElementById("cart-count").classList.add("bg-gray-400");

        // Check active method to show in success page
        const isOnline = document
          .getElementById("tab-online")
          .classList.contains("active");
        document.getElementById("success-method").innerText = isOnline
          ? "Online (Đã thanh toán)"
          : "COD (Thanh toán khi nhận)";

        scrollToTop();
      }
    </script>
    <script src="assets/js/cart.js"></script>
    <script>
      // Mobile Menu Toggle
      document.addEventListener("DOMContentLoaded", () => {
        const menuButton = document.getElementById("mobile-menu-button");
        const mobileMenu = document.getElementById("mobile-menu");
        const menuOverlay = document.getElementById("mobile-menu-overlay");

        const toggleMenu = () => mobileMenu.classList.toggle("hidden");

        if (menuButton && mobileMenu) {
          menuButton.addEventListener("click", toggleMenu);
          menuOverlay.addEventListener("click", toggleMenu);
        }
      });
    </script>
  </body>
</html>
