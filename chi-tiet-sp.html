<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chi tiết Sản phẩm - FarmEra</title>
    <link rel="icon" href="assets/img/favicons/favicon.ico" type="image/x-icon" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Plus+Jakarta+Sans:wght@500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              deepgreen: "#0F3D2E",
              olive: "#A3B18A",
              cream: "#F8F9F4",
              gold: "#E5C97B",
              graphite: "#1C1C1C",
            },
            fontFamily: {
              heading: ["Plus Jakarta Sans", "sans-serif"],
              body: ["Inter", "sans-serif"],
            },
          },
        },
      };
    </script>
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f8f9f4;
      }
      .glass-header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid #e5e5e5;
      }
      .feature-item i {
        width: 24px;
        text-align: center;
        margin-right: 12px;
        color: #e5c97b;
      }
    </style>
  </head>
  <body class="antialiased text-graphite">
    <!-- HEADER -->
    <header class="fixed w-full top-0 z-50 bg-white border-b-2 border-[#0F3D2E]/10 shadow-md">
      <div class="container mx-auto px-6 h-20 flex justify-between items-center">
        <!-- Logo & Brand -->
        <a href="index.html" class="flex items-center gap-3 group">
            <div class="w-16 h-16 bg-gradient-to-br from-[#0F3D2E] to-[#0A2618] rounded-lg flex items-center justify-center shadow-md group-hover:shadow-lg transition-shadow">
              <img src="assets/img/logo-farmera.png" alt="FarmEra" class="w-9 h-9 filter brightness-0 invert" />
          </div>
          <div class="hidden sm:block">
            <div class="text-sm font-bold text-[#0F3D2E] tracking-tight">FarmEra</div>
            <div class="text-xs text-[#A3B18A] font-medium">Kỷ nguyên Nông nghiệp số</div>
          </div>
        </a>

        <!-- Navigation Menu -->
        <nav class="hidden lg:flex items-center space-x-1">
          <a href="index.html" class="px-4 py-2 text-[#555] font-medium text-sm rounded-lg hover:bg-[#F8F9F4] hover:text-[#0F3D2E] transition-all duration-200">Trang chủ</a>
          <a href="san-pham.html" class="px-4 py-2 text-[#0F3D2E] font-semibold text-sm rounded-lg hover:bg-[#F8F9F4] transition-colors duration-200 border-b-2 border-[#0F3D2E]">Sản phẩm</a>
          <a href="dich-vu.html" class="px-4 py-2 text-[#555] font-medium text-sm rounded-lg hover:bg-[#F8F9F4] hover:text-[#0F3D2E] transition-all duration-200">Dịch vụ</a>
          <a href="gioi-thieu.html" class="px-4 py-2 text-[#555] font-medium text-sm rounded-lg hover:bg-[#F8F9F4] hover:text-[#0F3D2E] transition-all duration-200">Giới thiệu</a>
          <a href="chinh-sach.html" class="px-4 py-2 text-[#555] font-medium text-sm rounded-lg hover:bg-[#F8F9F4] hover:text-[#0F3D2E] transition-all duration-200">Chính sách</a>
          <a href="lien-he.html" class="px-4 py-2 text-[#555] font-medium text-sm rounded-lg hover:bg-[#F8F9F4] hover:text-[#0F3D2E] transition-all duration-200">Liên hệ</a>
        </nav>

        <!-- Right Actions -->
        <div class="flex items-center space-x-4">
          <!-- Search -->
          <form action="san-pham.html" method="get" class="hidden md:flex items-center bg-[#F8F9F4] rounded-full px-4 py-2 border border-[#E5C97B]/30 hover:border-[#E5C97B] transition-colors">
            <input name="q" type="search" placeholder="Tìm sản phẩm..." class="bg-transparent text-sm text-[#1C1C1C] placeholder-[#999] focus:outline-none w-40" />
            <button type="submit" class="text-[#A3B18A] hover:text-[#0F3D2E] transition-colors ml-2">
              <i class="fas fa-search text-sm"></i>
            </button>
          </form>

          <!-- Cart Icon -->
          <a href="gio-hang.htm" class="relative p-2.5 rounded-lg bg-[#F8F9F4] hover:bg-[#E5C97B] text-[#0F3D2E] transition-all duration-200 group">
            <i class="fas fa-shopping-cart text-lg"></i>
            <span id="cart-badge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center opacity-0 scale-0 group-hover:opacity-100 group-hover:scale-100 transition-all duration-200 hidden">0</span>
          </a>

          <!-- Mobile Menu Button -->
          <button id="mobile-menu-button" class="lg:hidden p-2 rounded-lg hover:bg-[#F8F9F4] text-[#0F3D2E]">
            <i class="fas fa-bars text-lg"></i>
          </button>
        </div>
      </div>
    </header>

    <!-- MOBILE MENU (New) -->
    <div id="mobile-menu" class="hidden lg:hidden fixed inset-0 bg-black/50 z-[99]">
        <div class="w-4/5 max-w-sm h-full bg-white shadow-2xl flex flex-col py-6">
            <div class="px-6 pb-4 border-b border-gray-200">
                <a href="index.html" class="flex items-center gap-3">
                    <img src="assets/img/logo-farmera.png" alt="FarmEra" class="w-9 h-9" />
                    <span class="font-bold text-deepgreen text-lg">FarmEra</span>
                </a>
            </div>
            <nav class="flex-1 px-6 py-4 space-y-2 text-lg">
                <a href="index.html" class="block py-2 text-gray-700 hover:text-gold">Trang chủ</a>
                <a href="san-pham.html" class="block py-2 text-gold font-semibold">Sản phẩm</a>
                <a href="dich-vu.html" class="block py-2 text-gray-700 hover:text-gold">Dịch vụ</a>
                <a href="gioi-thieu.html" class="block py-2 text-gray-700 hover:text-gold">Giới thiệu</a>
                <a href="chinh-sach.html" class="block py-2 text-gray-700 hover:text-gold">Chính sách</a>
                <a href="lien-he.html" class="block py-2 text-gray-700 hover:text-gold">Liên hệ</a>
            </nav>
            <div class="px-6 text-sm text-gray-400">
                &copy; 2025 FarmEra. All rights reserved.
            </div>
        </div>
        <div id="mobile-menu-overlay" class="flex-1 h-full"></div>
    </div>

    <div class="mt-20 py-4 bg-white border-b border-gray-200">
      <div class="container mx-auto px-6 text-sm text-gray-500">
        <a href="index.html" class="hover:text-deepgreen">Trang chủ</a>
        <span class="mx-2">/</span>
        <a href="san-pham.html" class="hover:text-deepgreen">Sản phẩm</a>
        <span class="mx-2">/</span>
        <span class="text-deepgreen font-bold" id="breadcrumb-name">Sản phẩm</span>
      </div>
    </div>

    <section class="py-12 bg-white">
      <div class="container mx-auto px-6">
        <div class="flex flex-col lg:flex-row gap-12">
          <div class="w-full lg:w-3/5">
            <div
              class="bg-gray-100 rounded-2xl overflow-hidden mb-8 shadow-lg h-[400px] md:h-[500px] flex items-center justify-center"
            >
              <img
                id="product-main-img"
                src="assets/img/product-1.svg"
                class="w-full h-full object-cover rounded-xl"
                alt="Product image"
              />
            </div>
            <div class="flex gap-4 justify-start" id="product-gallery">
              <div
                class="bg-gray-100 rounded-lg h-32 w-32 cursor-pointer border-4 border-transparent hover:border-gold transition-all duration-300 flex-shrink-0"
                onclick="changeImage(0)"
              >
                <img
                  id="gallery-img-0"
                  src="assets/img/product-1.svg"
                  class="w-full h-full object-cover rounded-lg"
                />
              </div>
              <div
                class="bg-gray-100 rounded-lg h-32 w-32 cursor-pointer border-4 border-transparent hover:border-gold transition-all duration-300 flex-shrink-0"
                onclick="changeImage(1)"
              >
                <img
                  id="gallery-img-1"
                  src="assets/img/product-1.svg"
                  class="w-full h-full object-cover rounded-lg"
                />
              </div>
              <div
                class="bg-gray-100 rounded-lg h-32 w-32 cursor-pointer border-4 border-transparent hover:border-gold transition-all duration-300 flex-shrink-0"
                onclick="changeImage(2)"
              >
                <img
                  id="gallery-img-2"
                  src="assets/img/product-1.svg"
                  class="w-full h-full object-cover rounded-lg"
                />
              </div>
            </div>
          </div>

          <div class="w-full lg:w-2/5 flex flex-col justify-center">
            <div class="mb-2 flex items-center gap-2">
              <span
                class="bg-deepgreen/10 text-deepgreen text-xs font-bold px-3 py-1 rounded-full uppercase"
                id="product-type"
              >
                Sản phẩm
              </span>
              <div class="flex text-gold text-xs">
                <i class="fas fa-star"></i><i class="fas fa-star"></i
                ><i class="fas fa-star"></i><i class="fas fa-star"></i
                ><i class="fas fa-star"></i>
                <span class="text-gray-400 ml-1">(12 đánh giá)</span>
              </div>
            </div>

            <h1 id="product-title" class="text-3xl md:text-4xl font-bold text-deepgreen font-heading mb-4">Hệ thống thủy canh IoT</h1>

            <div id="product-price" class="text-3xl font-bold text-gold mb-6">5.500.000đ <span id="product-price-unit" class="text-lg text-gray-500 font-normal"></span></div>

            <p class="text-gray-600 mb-6 leading-relaxed" id="product-description">
              Giải pháp trồng rau thủy canh công nghệ cao với hệ thống tưới tự động, cảm biến IoT, và ứng dụng quản lý từ xa. Phù hợp cho nhà máy nông nghiệp, HTX và nông dân có quy mô.
            </p>

            <div class="border-t border-gray-100 pt-6 mb-8">
                <p id="product-extra" class="text-sm text-gray-500 italic"></p>
            </div>

            <div class="flex gap-4">
              <button
                id="cta-button"
                class="flex-1 bg-deepgreen text-white font-bold py-4 rounded-xl hover:bg-gold hover:text-deepgreen transition shadow-lg text-center"
              >
                Thêm vào giỏ hàng
              </button>
              <button
                class="w-16 bg-cream text-deepgreen border border-gray-200 rounded-xl hover:border-deepgreen transition flex items-center justify-center text-xl"
              >
                <i class="fas fa-heart"></i>
              </button>
            </div>
            <p class="text-xs text-gray-400 mt-4 text-center">
              *Giá có thể khác tùy theo cấu hình chi tiết. Liên hệ để báo giá.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section class="py-16 bg-cream">
      <div class="container mx-auto px-6">
        <div class="max-w-4xl mx-auto">
          <div class="flex space-x-8 border-b border-gray-300 mb-8">
            <button id="tab-desc" onclick="switchTab('desc')" class="tab-btn pb-4 border-b-2 border-deepgreen text-deepgreen font-bold">
              Mô tả chi tiết
            </button>
            <button id="tab-specs" onclick="switchTab('specs')" class="tab-btn pb-4 border-b-2 border-transparent text-gray-500 hover:text-deepgreen">
              Quy cách kỹ thuật
            </button>
            <button id="tab-reviews" onclick="switchTab('reviews')" class="tab-btn pb-4 border-b-2 border-transparent text-gray-500 hover:text-deepgreen">
              Đánh giá
            </button>
          </div>

          <div class="bg-white p-8 rounded-2xl shadow-sm min-h-[300px]">
            <!-- Tab Content: Description -->
            <div id="content-desc" class="tab-content">
              <div id="product-full-details" class="prose max-w-none">
                 <p class="text-gray-500">
                  Vui lòng chọn một sản phẩm để xem mô tả chi tiết.
                </p>
              </div>
            </div>
            <!-- Tab Content: Specifications -->
            <div id="content-specs" class="tab-content hidden">
               <div id="product-specs-table" class="prose max-w-none">
                 <p class="text-gray-500">
                  Thông số kỹ thuật chưa được cập nhật cho sản phẩm này.
                </p>
              </div>
            </div>
            <!-- Tab Content: Reviews -->
            <div id="content-reviews" class="tab-content hidden">
              <div class="text-center py-10">
                <i class="fas fa-comments text-4xl text-gray-300 mb-4"></i>
                <h4 class="font-bold text-gray-700">Chưa có đánh giá nào</h4>
                <p class="text-sm text-gray-500">Hãy là người đầu tiên đánh giá sản phẩm này.</p>
              </div>
               <div class="prose max-w-none">
                <p class="text-gray-500">
                  Vui lòng chọn một sản phẩm để xem mô tả chi tiết.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="py-16 bg-white">
      <div class="container mx-auto px-6">
        <h2 class="text-2xl font-bold text-deepgreen mb-8">
          Sản phẩm & Dịch vụ liên quan
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
          <div
            class="bg-white rounded-xl overflow-hidden border border-gray-100 shadow-sm hover:shadow-lg transition"
          >
            <div class="h-40 bg-gray-200">
              <img
                src="assets/img/product-15.svg"
                class="w-full h-full object-cover"
              />
            </div>
            <div class="p-4">
              <h4 class="font-bold text-deepgreen text-sm">Indoor Smart Farm Mini</h4>
              <span class="text-gold font-bold text-sm">2.800.000đ</span>
              <a href="chi-tiet-sp.html?id=15" class="text-xs font-bold text-deepgreen hover:text-gold mt-2 block">Chi tiết →</a>
            </div>
          </div>
          <div
            class="bg-white rounded-xl overflow-hidden border border-gray-100 shadow-sm hover:shadow-lg transition"
          >
            <div class="h-40 bg-gray-200">
              <img
                src="assets/img/product-18.svg"
                class="w-full h-full object-cover"
              />
            </div>
            <div class="p-4">
              <h4 class="font-bold text-deepgreen text-sm">Kit tưới nhỏ giọt (Pro)</h4>
              <span class="text-gold font-bold text-sm">1.250.000đ</span>
              <a href="chi-tiet-sp.html?id=18" class="text-xs font-bold text-deepgreen hover:text-gold mt-2 block">Chi tiết →</a>
            </div>
          </div>
          <div
            class="bg-white rounded-xl overflow-hidden border border-gray-100 shadow-sm hover:shadow-lg transition"
          >
            <div class="h-40 bg-gray-200">
              <img
                src="assets/img/product-19.svg"
                class="w-full h-full object-cover"
              />
            </div>
            <div class="p-4">
              <h4 class="font-bold text-deepgreen text-sm">Máy phun thông minh</h4>
              <span class="text-gold font-bold text-sm">3.200.000đ</span>
              <a href="chi-tiet-sp.html?id=19" class="text-xs font-bold text-deepgreen hover:text-gold mt-2 block">Chi tiết →</a>
            </div>
          </div>
          <div
            class="bg-white rounded-xl overflow-hidden border border-gray-100 shadow-sm hover:shadow-lg transition"
          >
            <div class="h-40 bg-gray-200">
              <img
                src="assets/img/product-20.svg"
                class="w-full h-full object-cover"
              />
            </div>
            <div class="p-4">
              <h4 class="font-bold text-deepgreen text-sm">Bộ điều khiển trung tâm</h4>
              <span class="text-gold font-bold text-sm">4.500.000đ</span>
              <a href="chi-tiet-sp.html?id=20" class="text-xs font-bold text-deepgreen hover:text-gold mt-2 block">Chi tiết →</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-[#0F3D2E] text-white pt-20 pb-8">
      <div class="container mx-auto px-6">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-12 mb-12">
          <!-- Brand Column -->
          <div class="lg:col-span-1">
            <a href="index.html" class="text-2xl font-bold text-[#E5C97B] font-heading tracking-tighter mb-4 flex items-center gap-2">
              <img src="assets/img/logo-farmera.png" alt="FarmEra" class="w-8 h-8 filter brightness-0 invert" />
              <span>Farm<span class="text-white">Era</span></span>
            </a>
            <p class="text-gray-300 text-sm mb-6 leading-relaxed">Nền tảng kết nối công nghệ nông nghiệp với nông dân Việt Nam.</p>
            <div class="flex space-x-3">
              <a
                href="https://www.facebook.com/share/1AGQoSJx9m/"
                target="_blank"
                class="w-10 h-10 rounded-full bg-white/10 hover:bg-[#E5C97B] hover:text-[#0F3D2E] transition flex items-center justify-center text-sm"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a
                href="https://www.instagram.com/accounts/emailsignup/"
                target="_blank"
                class="w-10 h-10 rounded-full bg-white/10 hover:bg-[#E5C97B] hover:text-[#0F3D2E] transition flex items-center justify-center text-sm"
                ><i class="fab fa-instagram"></i
              ></a>
              <a
                href="https://www.tiktok.com/@mientaythdt2/video/7556173388276911381?q=n%C3%B4ng%20nghi%E1%BB%87p%20s%E1%BB%91&t=1764511331369"
                target="_blank"
                class="w-10 h-10 rounded-full bg-white/10 hover:bg-[#E5C97B] hover:text-[#0F3D2E] transition flex items-center justify-center text-sm"
                ><i class="fab fa-tiktok"></i
              ></a>
              <a
                href="https://id.zalo.me/account?continue=http%3A%2F%2Fzalo.me%2F0792101733"
                target="_blank"
                class="w-10 h-10 rounded-full bg-white/10 hover:bg-[#E5C97B] hover:text-[#0F3D2E] transition flex items-center justify-center text-sm"
                ><i class="fas fa-comment-dots"></i
              ></a>
            </div>
          </div>
          <!-- Menu -->
          <div>
            <h4 class="text-lg font-bold mb-6 text-[#E5C97B] uppercase text-xs tracking-wider">Menu</h4>
            <ul class="space-y-3 text-gray-300 text-sm">
              <li><a href="index.html" class="hover:text-[#E5C97B] transition">Trang chủ</a></li>
              <li><a href="san-pham.html" class="hover:text-[#E5C97B] transition">Sản phẩm</a></li>
              <li><a href="dich-vu.html" class="hover:text-[#E5C97B] transition">Dịch vụ</a></li>
              <li><a href="gioi-thieu.html" class="hover:text-[#E5C97B] transition">Giới thiệu</a></li>
            </ul>
          </div>
          <!-- Policies -->
          <div>
            <h4 class="text-lg font-bold mb-6 text-[#E5C97B] uppercase text-xs tracking-wider">Chính sách</h4>
            <ul class="space-y-3 text-gray-300 text-sm">
              <li><a href="chinh-sach.html" class="hover:text-[#E5C97B] transition">Điều khoản sử dụng</a></li>
              <li><a href="chinh-sach.html" class="hover:text-[#E5C97B] transition">Bảo mật dữ liệu</a></li>
              <li><a href="chinh-sach.html" class="hover:text-[#E5C97B] transition">Đổi trả & hoàn tiền</a></li>
              <li><a href="lien-he.html" class="hover:text-[#E5C97B] transition">Liên hệ hỗ trợ</a></li>
            </ul>
          </div>
          <!-- Contact -->
          <div>
            <h4 class="text-lg font-bold mb-6 text-[#E5C97B] uppercase text-xs tracking-wider">Liên hệ</h4>
            <ul class="space-y-3 text-gray-300 text-sm">
              <li class="flex items-start"><i class="fas fa-map-marker-alt mr-3 text-[#E5C97B] mt-1 shrink-0"></i> <span>Số 2, Đường 3/2, Ninh Kiều, Cần Thơ</span></li>
              <li class="flex items-center"><i class="fas fa-phone mr-3 text-[#E5C97B]"></i> <a href="tel:0792101733" class="hover:text-[#E5C97B]">0792 101 733</a></li>
              <li class="flex items-center"><i class="fas fa-envelope mr-3 text-[#E5C97B]"></i> <a href="mailto:support@farmera.vn" class="hover:text-[#E5C97B]">support@farmera.vn</a></li>
            </ul>
          </div>
          <!-- Newsletter -->
          <div>
            <h4 class="text-lg font-bold mb-6 text-[#E5C97B] uppercase text-xs tracking-wider">Nhận tin</h4>
            <p class="text-gray-300 text-sm mb-4">Đăng ký để nhận cập nhật mùa vụ & khuyến mãi.</p>
            <form class="flex flex-col gap-2">
              <input type="email" placeholder="Email của bạn" class="px-4 py-2 rounded bg-white/10 border border-white/20 text-white text-sm placeholder-gray-400 focus:outline-none focus:border-[#E5C97B] transition" />
              <button type="submit" class="px-4 py-2 bg-[#E5C97B] text-[#0F3D2E] rounded font-bold hover:bg-white transition text-sm">Đăng ký</button>
            </form>
          </div>
        </div>
        <!-- Bottom Bar -->
        <div class="border-t border-white/10 pt-8 text-center text-gray-400 text-sm">
          <p>
            &copy; 2025 FarmEra. All rights reserved. | <a href="#" class="hover:text-[#E5C97B]">Group 9 <i class="fas fa-heart text-red-500"></i></a>
          </p>
        </div>
      </div>
    </footer>

    <script src="assets/js/products.js"></script>
    <script src="assets/js/services.js"></script>
    <script>
      let currentImageIndex = 0;
      let productImages = [];

      function getParam(name) {
        const params = new URLSearchParams(window.location.search);
        return params.get(name);
      }

      function switchTab(tabName) {
        // Hide all content
        document.querySelectorAll('.tab-content').forEach(content => {
          content.classList.add('hidden');
        });
        // Deactivate all buttons
        document.querySelectorAll('.tab-btn').forEach(btn => {
          btn.classList.remove('border-deepgreen', 'text-deepgreen', 'font-bold');
          btn.classList.add('border-transparent', 'text-gray-500');
        });

        // Activate selected tab and content
        const activeContent = document.getElementById(`content-${tabName}`);
        const activeButton = document.getElementById(`tab-${tabName}`);
        if (activeContent) {
          activeContent.classList.remove('hidden');
        }
        if (activeButton) {
          activeButton.classList.add('border-deepgreen', 'text-deepgreen', 'font-bold');
          activeButton.classList.remove('border-transparent', 'text-gray-500');
        }
      }

      function changeImage(index) {
        if (!productImages || productImages.length === 0) return;
        currentImageIndex = index;
        const mainImg = document.getElementById('product-main-img');
        if (mainImg) mainImg.src = productImages[index];
        
        // Update active border
        document.querySelectorAll('[id^="gallery-img-"]').forEach((img, i) => {
          const parent = img.parentElement;
          if (i === index) {
            parent.classList.add('border-gold');
            parent.classList.remove('border-transparent');
          } else {
            parent.classList.remove('border-gold');
            parent.classList.add('border-transparent');
          }
        });
      }

      function addToCart() {
        const id = parseInt(getParam('id'));
        const p = window.products && window.products.find(x => x.id === id);
        if (!p) return;
        
        const details = window.productDetails && window.productDetails[p.name];
        if (details && details.cta && details.cta.toLowerCase().includes('tư vấn')) {
            window.location.href = 'lien-he.html';
        } else {
            addItemToCart(p); // Gọi hàm chung từ cart.js
        }
      }

      function updateCartBadge() {
        const cart = JSON.parse(localStorage.getItem('farmera_cart')) || [];
        const badge = document.getElementById('cart-badge');
        if (cart.length > 0) {
          badge.classList.remove('hidden');
          badge.innerText = cart.length;
        } else {
          badge.classList.add('hidden');
        }
      }

      document.addEventListener('DOMContentLoaded', () => {
        const id = parseInt(getParam('id'));
        if (!id) return;
        const p = window.products && window.products.find(x => x.id === id);
        if (!p) return;
        const titleEl = document.getElementById('product-title');
        const imgEl = document.getElementById('product-main-img');
        const priceEl = document.getElementById('product-price');
        const typeEl = document.getElementById('product-type');
        const breadcrumbEl = document.getElementById('breadcrumb-name');
        const descEl = document.getElementById('product-description');
        const extraEl = document.getElementById('product-extra');
        const fullEl = document.getElementById('product-full-details');
        const specsTableEl = document.getElementById('product-specs-table');
        const ctaButton = document.getElementById('cta-button');
        
        if (titleEl) titleEl.innerText = p.name;
        if (imgEl) imgEl.src = p.img;
        if (priceEl) priceEl.childNodes[0].nodeValue = p.price;
        if (typeEl) typeEl.innerText = p.type || 'Sản phẩm';
        if (breadcrumbEl) breadcrumbEl.innerText = p.name;
        // Hiển thị chi tiết sản phẩm từ window.productDetails
        const details = window.productDetails && window.productDetails[p.name];
        if (fullEl && details) {
          // Cập nhật mô tả ngắn
          if (descEl) descEl.innerText = details.summary || ('Chi tiết sản phẩm: ' + p.name + ' - Giá: ' + p.price);
          if (extraEl) extraEl.innerText = details.extra || '';

          // Cập nhật nút CTA
          if (ctaButton) {
            if (details.cta) ctaButton.innerText = details.cta;
            ctaButton.addEventListener('click', addToCart);
          }

          // Cập nhật tab "Quy cách kỹ thuật"
          if (specsTableEl && details.specs) {
            specsTableEl.innerHTML = `
              <ul class='space-y-3 list-none p-0'>
                ${details.specs.map(spec => {
                  const parts = spec.split(':');
                  return `<li class='flex border-b border-gray-100 pb-3'><strong class='w-1/3 text-gray-500 font-medium'>${parts[0]}:</strong><span class='flex-1 text-gray-800'>${parts.slice(1).join(':').trim()}</span></li>`;
                }).join('')}
              </ul>`;
          }
          
          // Cập nhật khu vực mô tả chi tiết
          fullEl.innerHTML = `
            <div class='prose max-w-none text-gray-700'>
              <p class='lead'>${details.description || ''}</p>
              
              ${details.highlights ? `
                <h4 class='text-deepgreen font-bold mt-8'>Đặc điểm nổi bật</h4>
                <ul class='space-y-2'>
                  ${details.highlights.map(h => `
                    <li class='flex items-start'>
                      <i class='fas fa-check text-olive mr-3 mt-1 shrink-0'></i>
                      <span>${h}</span>
                    </li>`).join('')}
                </ul>
              ` : ''}

              ${details.support ? `
                <h4 class='text-deepgreen font-bold mt-8'>Hỗ trợ & Bảo hành</h4>
                <ul class='space-y-2'>
                  ${details.support.map(h => `
                    <li class='flex items-start'>
                      <i class='fas fa-shield-alt text-olive mr-3 mt-1 shrink-0'></i>
                      <span>${h}</span>
                    </li>`).join('')}
                </ul>
              ` : ''}
            </div>
          `;
        } else {
          // Fallback cho mô tả ngắn nếu không có details
          if (descEl) {
            descEl.innerText = 'Chi tiết sản phẩm: ' + p.name + ' - Giá: ' + p.price;
          }
        }
        
        // Load 3 thumbnail images from product.images array
        productImages = (p.images && p.images.length > 0) ? p.images : [p.img, p.img, p.img];
        for (let i = 0; i < 3; i++) {
          const galImg = document.getElementById('gallery-img-' + i);
          if (galImg && productImages[i]) galImg.src = productImages[i];
        }
        changeImage(0);
        updateCartBadge();
      });
    </script>
    </script>
    <script src="assets/js/cart.js"></script>
    <script>
      // Mobile Menu Toggle
      document.addEventListener("DOMContentLoaded", () => {
        const menuButton = document.getElementById("mobile-menu-button");
        const mobileMenu = document.getElementById("mobile-menu");
        const menuOverlay = document.getElementById("mobile-menu-overlay");

        const toggleMenu = () => mobileMenu.classList.toggle("hidden");

        if (menuButton && mobileMenu) {
          menuButton.addEventListener("click", toggleMenu);
          menuOverlay.addEventListener("click", toggleMenu);
        }
      });
    </script>
  </body>
</html>
